@model UResidence.Amenity

@{
    /**/

    ViewBag.Title = "AmenityView";
}

<h2>AmenityView</h2>
@using (Html.BeginForm("AmenityView", "Amenity", FormMethod.Post))
{
    @Html.AntiForgeryToken()

    <h4>Amenity</h4>
    <hr />
    <div class="dl-horizontal">
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th>
                        @Html.DisplayNameFor(model => model.AmenityNo)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Description)
                    </th>
                    <th>
                        @Html.DisplayNameFor(model => model.Capacity)
                    </th>
                    <th>
                        Actions
                    </th>
                </tr>
            </thead>


            @{ int ctr = 0;}

            @foreach (Amenity a in ViewBag.amenity)
            {

                <tbody>
                    <tr>
                        <td>
                            @Html.DisplayFor(model => a.AmenityNo, new { id = "id_Ano" + ctr })
                        </td>
                        <td>
                            @Html.DisplayFor(model => a.Description)
                        </td>
                        <td>
                            @Html.DisplayFor(model => a.Capacity)
                        </td>
                        <td>


                            <button class="btn btn-link" data-target="#EditModal" data-toggle="modal"><i class="glyphicon glyphicon-edit"></i>EDIT</button>
                            <a class="btn" href="@Url.Action("Delete","Amenity",new {id =Convert.ToInt32(a.AmenityNo)})"><i class="glyphicon glyphicon-trash"></i> DELETE</a>
                        </td>

                    </tr>
                </tbody>

            }

        </table>


    </div>

    <div class="btn-link">
        @Html.ActionLink("Add", "Reserve")
    </div>
    <div class="modal fade" id="EditModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Edit</h4>
                </div>
                <div class="modal-body">
                    <form id="editForm" method="post" action="~/Views/Amenity/AmenityView.cshtml">
                        <fieldset id="SubmitForm">
                            <div class="form-group">
                                @Html.LabelFor(model => model.AmenityNo, new { @id = "AmenityNo", @class = "form-control", @value = "1" })
                            </div>
                            <div class="form-group">
                                @Html.TextBoxFor(model => model.Description, new { @id = "Description", @class = "form-control", @placeholder = "Description", @required = "required" })
                            </div>
                            <div class="form-group">
                                @Html.TextBoxFor(model => model.Capacity, new { @id = "Capacity", @class = "form-control", @placeholder = "Capacity", @required = "required" })
                            </div>
                            <div class="form-group">
                                <button id="btnSave" class="btn btn-primary"><i class="glyphicon glyphicon-floppy-saved"></i> Save</button>
                            </div>

                        </fieldset>
                    </form>
                </div>
            </div>
        </div>


    </div>
    <div id="aerror" class="alert alert-danger collapse">
        <a href="#" class="close" data-dismiss="alert">&times;</a>
        <strong>Error!</strong> There is a problem deleting the Amenity
    </div>
    <div id="asuccess" class="alert alert-success collapse">
        <strong>Success!</strong> You have successfully deleted the Amenity
    </div>
    if (ViewBag.DeleteStatus != null)
    {
        if (ViewBag.DeleteStatus == true)
        {
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
            </script>
            <script type="text/javascript">
                $(document).ready(function () {

                    $('#asuccess').show('fade');

                    setTimeout(function () {
                        $('#asuccess').hide('fade');
                    }, 2000);


                });
            </script>
        }
   
   else
        {
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
            </script>
            <script type="text/javascript">
                $(document).ready(function () {

                    $('#aerror').show('fade');

                    setTimeout(function () {
                        $('#aerror').hide('fade');
                    }, 2000);


                });
            </script>
        }
    }




    <script src="jquery.min.js"></script>
    <script>
        $('.table tbody').on('click', '.btn', function () {
            var currow = $(this).closest('tr');
            var col1 = currow.find('td:eq(0)').text();
            alert(col1);
        })


        $("#btnEdit").click(function () {

            $("#Edit").html("Edit Amenity");
            $("#EditModal").modal();

        });

    </script>

} 