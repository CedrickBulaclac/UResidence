
@{
    ViewBag.Title = "Calendar";

    if (Convert.ToInt32(Session["Level"]) == 8)
    {
        Layout = "~/Views/Layout/LayoutHome.cshtml";
    }
    else if (Convert.ToInt32(Session["Level"]) == 9)
    {
        Layout = "~/Views/Layout/TenantLayout.cshtml";
    }
}

<br />
<div>
	<center>
		<div class="progress" style="width:860px;height:40px;">
			<div class="progress-bar progress-bar-success " role="progressbar" aria-valuenow="20"
				 aria-valuemin="0" aria-valuemax="100" style="width:20%;">
				<a href="@Url.Action("Amenity","Reserve")" style="text-decoration:none;"><p style="font-family:Arial, Helvetica, sans-serif; padding-top:1em"> <font color="white" size="3">Choose Amenity</font></p></a>
			</div>


			<div class="progress-bar progress-bar-success progress-bar-striped active " style="width:20%;" role="progressbar" aria-valuenow="0"
				 aria-valuemin="0" aria-valuemax="100">
				<p style="font-family:Arial, Helvetica, sans-serif;padding-top:1em"> <font color="white" size="3">Scheduled Amenity</font> </p>
			</div>


			<div class="progress-bar " style="background-color:#979797; width:20%;" role="progressbar" aria-valuenow="0"
				 aria-valuemin="0" aria-valuemax="100">
				<p style="font-family:Arial, Helvetica, sans-serif;padding-top:1em"> <font color="white" size="3">Choose Date</font> </p>
			</div>

			<div class="progress-bar " style="background-color:#979797; width:20%;" role="progressbar" aria-valuenow="0"
				 aria-valuemin="0" aria-valuemax="100">
				<p style="font-family:Arial, Helvetica, sans-serif;padding-top:1em"> <font color="white" size="3">Choose Equipment</font> </p>
			</div>
			<div class="progress-bar  " style="background-color:#979797; width:20%;" role="progressbar" aria-valuenow="0"
				 aria-valuemin="0" aria-valuemax="100">
				<p style="font-family:Arial, Helvetica, sans-serif;padding-top:1em"> <font color="white" size="3">Summary</font> </p>
			</div>
		</div>

	</center>
</div>


<style>



	.button {
		padding: 15px 25px;
		font-size: 15px;
		text-align: center;
		cursor: pointer;
		outline: none;
		color: #fff;
		background-color: #0f6c45;
		border: none;
		border-radius: 5px;
		float: right;
		text-decoration: none;
		text-decoration-color: none;
	}



		.button:hover {
			background-color: #128153;
			text-decoration: none;
			text-decoration-color: none;
		}
</style>


    <div id="calendar" class="container"></div>

<div class="container">
	<div class="modal fade" id="myModal" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title"><span id="eventTitle"></span></h4>
				</div>
				<div class="modal-body">
					<p id="pDetails"></p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
</div>




<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.print.css" rel="stylesheet" media="print" />

@section scripts{
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.4.0/fullcalendar.min.js"></script>

	<script>



		$(document).ready(function () {
			var events = [];
			$.ajax({
				type: "GET",
				url: "/Reserve/GetEvents",
				success: function (data) {
					$.each(data, function (i, v) {
						events.push({
							title: v.AmenityName,
							start: moment(v.StartTime),
							end: v.EndTIme != null ? moment(v.EndTIme) : null,
							rate: v.Rate,
							color: v.Theme
						});
					})
					GenerateCalendar(events);
				},
				error: function (error) {
					alert('failed');
				}
			})

			function GenerateCalendar(events) {
				$('#calendar').fullCalendar('destroy');
				$('#calendar').fullCalendar({
					contentHeight: 400,
					defaultDate: new Date(),
					timeFormat: 'h(:mm):a',
					header: {
						left: 'prev,next today',
						center: 'title',
						right: 'month,basicWeek,basicDay,agenda'
					},
					eventLimit: true,
					eventColor: '#378006',
					events: events,

					eventClick: function (calEvent, jsEvent, view) {
						$('#myModal #eventTitle').html('<b>Amenity Name: </b>' + calEvent.title);
						var $description = $('<div/>');
						$description.append($('<p/>').html('<b>StartTime: </b>' + calEvent.start.format("DD/MMM/YYYY HH:mm a")));
						if (calEvent.end != null) {
							$description.append($('<p/>').html('<b>EndTime: </b>' + calEvent.end.format("DD/MMM/YYYY HH:mm a")));
						}
						$description.append($('<p/>').html('<b>Rate: </b>' + calEvent.rate));
						$('#myModal #pDetails').empty().html($description);
						$('#myModal').modal();


					},

				})
			}
		})



	</script>


}


<br />
@if (ViewBag.Amenity == "Swimming Pool" || ViewBag.Amenity == "SWIMMING POOL")
{
	<font color="white"><a class="button" style="text-decoration-color:none; text-decoration:none;" href="@Url.Action("Swimming", "Reserve")">NEXT</a></font>
}
else
{
	<font color="white"><a class="button" style="text-decoration-color:none; text-decoration:none;" href="@Url.Action("Choose_Date", "Reserve")  ">NEXT</a></font>
}
<br />
<br />

<!-- Footer -->
<br />
<footer class="w3-center  w3-dark-gray w3-padding-16 w3-text-white " style="position:relative; left: 0; bottom: 0; width:100%; text-align:center; overflow:hidden;">
	<p>&copy; @DateTime.Now.Year -Palmdale Heights Condominium</p>
</footer>
