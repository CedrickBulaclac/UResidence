@model List<UResidence.Owner>

@{
	ViewBag.Title = "OwnerView";
	Layout = "/Views/Layout/RegistrationLayout.cshtml";
}
@*Scripts for dropdown*@
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<center>
	<h2>List of Owner</h2>
</center>

<div class="container">
	<div class="modal fade" id="formModal" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<label>Owner Registration Form</label>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>
				<div class="modal-body">
					<center>
						<img height="250px" src="" width="250px" id="oform">
					</center>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-danger" id="btnCloseImage" name="btnCloseImage" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
</div>



@using (Html.BeginForm("OwnerView", "Owner", FormMethod.Post))
{
	@Html.AntiForgeryToken()

<div class="container">
	<hr />
	<table class="table table-bordered table-striped">
		<tr>			
			<th scope="col">
				Building No
			</th>
			<th scope="col">
				Unit No
			</th>
			<th scope="col">
				First Name
			</th>
			<th scope="col">
				Middle Name
			</th>
			<th scope="col">
				Last Name
			</th>
			<th scope="col">
				Birthdate
			</th>
			<th scope="col">
				Cellphone No
			</th>
			<th scope="col">
				Email
			</th>
			<th scope="col">
				Form
			</th>

			<th>Actions</th>
		</tr>
		@if (Model != null)
		{
			<tbody>
				@foreach (Owner item in Model)
				{
					<tr scope="row">
						<td>
							@Html.DisplayFor(modelItem => item.Id)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.BldgNo)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.UnitNo)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.Fname)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.Mname)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.Lname)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.Bdate)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.CelNo)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.Email)
						</td>

						<td><button type="button" class="btn btn-info" id="btnForm" name="btnForm" data-dismiss="modal" onclick="Set('@item.Form')">View</button></td>

						<td>
							<a class="btn btn-primary" href="@Url.Action("OwnerEdit", "Owner", new { id = Convert.ToInt32(item.Id) })"><i class="glyphicon glyphicon-edit"></i></a>
							<a class="btn btn-danger" href="@Url.Action("Delete", "Owner", new { id = Convert.ToInt32(item.Id) })"><i class="glyphicon glyphicon-trash"></i> </a>

						</td>
					</tr>
				}
			</tbody>
		}

	</table>
	<div class="form-inline">

		<a href="@Url.Action("OwnerAdd","Owner")" @*style="margin-left:150px;"*@ class="btn btn-success">ADD NEW OWNER</a>
		<a class="btn btn-default" href="@Url.Action("Download","Owner")">Download List of Owner</a>

	</div>
</div>

	

	<div id="auerror" class="alert alert-danger collapse">
		<a href="#" class="close" data-dismiss="alert">&times;</a>
		<strong>Error!</strong> There is a problem updating the Owner
	</div>
	<div id="ausuccess" class="alert alert-success collapse">
		<strong>Success!</strong> You have successfully updated the Owner
	</div>

	<div id="aerror" class="alert alert-danger collapse">
		<a href="#" class="close" data-dismiss="alert">&times;</a>
		<strong>Error!</strong> There is a problem deleting the Owner
	</div>
	<div id="asuccess" class="alert alert-success collapse">
		<strong>Success!</strong> You have successfully deleted the Owner
	</div>
	<div id="aaerror" class="alert alert-danger collapse">
		<a href="#" class="close" data-dismiss="alert">&times;</a>
		<strong>Error!</strong> There is a problem submitting your form
	</div>
	<div id="aasuccess" class="alert alert-success collapse">
		<strong>Success!</strong> You have successfully added a Owner
	</div>
	if (ViewBag.DeleteStatus != null)
	{
		if (ViewBag.DeleteStatus == true)
		{
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
			</script>
			<script type="text/javascript">
				$(document).ready(function () {

					$('#asuccess').show('fade');

					setTimeout(function () {
						$('#asuccess').hide('fade');
					}, 20000);


				});
			</script>
		}

		else
		{
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
			</script>
			<script type="text/javascript">
				$(document).ready(function () {

					$('#aerror').show('fade');

					setTimeout(function () {
						$('#aerror').hide('fade');
					}, 20000);


				});
			</script>
		}
	}
	if (ViewBag.UpdateMessage != null)
	{
		if (ViewBag.UpdateMessage == true)
		{
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
			</script>
			<script type="text/javascript">
				$(document).ready(function () {

					$('#ausuccess').show('fade');

					setTimeout(function () {
						$('#ausuccess').hide('fade');
					}, 20000);


				});
			</script>
		}

		else
		{
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
			</script>
			<script type="text/javascript">
				$(document).ready(function () {

					$('#auerror').show('fade');

					setTimeout(function () {
						$('#auerror').hide('fade');
					}, 20000);


				});
			</script>
		}
	}

	if (ViewBag.AddMessage != null)
	{
		if (ViewBag.AddMessage == true)
		{

			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
			</script>
			<script type="text/javascript">

				$(document).ready(function () {

					$('#aasuccess').show('fade');

					setTimeout(function () {
						$('#aasuccess').hide('fade');
					}, 20000);

				});
			</script>
		}

		else
		{
			<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js">
			</script>
			<script type="text/javascript">

				$(document).ready(function () {

					$('#aaerror').show('fade');

					setTimeout(function () {
						$('#aaerror').hide('fade');
					}, 2000);


				});
			</script>

		}

	}

}
<script>
	var fr;
    function Download() {
        $.post("/Owner/Download");
    }

	function Set(form) {
		fr = form;
		var fullpath = (fr).toString();
		var filename = fullpath.replace(/^.*[\\\/]/, '');
		var path = "../Content/OwnerImages/" + filename;

		document.getElementById('oform').setAttribute('src', path)

		$('#formModal').modal();
	}


	$('#btnCloseImage').click(function () {

		$('#formModal').hide();
	}
	);

	//$('#btnForm').click(function () {

	//	$('#formModal').modal();
	//}
	//);

</script>